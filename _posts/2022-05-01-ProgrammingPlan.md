---
layout: post
title:  "환생형 모바일 파밍RPG 설계"
---









# 환생형 모바일 파밍RPG 설계

유니티를 이용한 모바일RPG를 만들기 위한 설계를 진행한다.




### 게임 구성 요소



* **스크린 화면**

  * 세로 화면

* **카메라 화면**

  * 플레이어 트래킹
  * 스킬 혹은 강화 몬스터급 이상 공격시 화면 흔들림 구현

* **환생 조건**

  * 최소한의 조건
    * 몬스터 1000마리 처치
    * 강화몬스터 500마리 처치
    * 장비 획득 20개
    * 최소 조건 +alpha의 경우 비례 추가보상
  * 환생 보상
    * 플레이어 경험치
    * 스킬 경험치
    * 펫 경험치

* **플레이어**

  * 1명의 플레이어
    * 동작
      * 좌우
      * 점프
      * 사다리 타기
      * 공격하기
      * 데미지를 입음
      * 스킬 동작
    * 전직
      * 1단계 
        * 탐험가 (공통)
      * 2단계
        * 전사 : 물리공격 속성을 강화
        * 궁사 : 공격속도 속성을 강화
        * 마법사 : 마법공격 속성을 강화
    * 캐릭터 속성
      * STR : 물리공격력 강화
      * DEX : 공격속도, 캐스팅속도, 이동속도 강화
      * INT : 마법공격력 강화
      * DEF : 물리/마법 방어력 강화, HP/MP 증가
      * SMT : 고급아이템 획득률 강화
    * 장비
      * 획득 방식
        * 몬스터 처치시
        * 환생시 획득한 장비상자 개봉시
      * 무기
        * 검 / 활 / 지팡이
      * 방어구
        * 투구 / 갑옷 / 장갑 / 신발
    * 성장 방식
      * 경험치 획득
        * 몬스터 처치시 획득
          * 플레이어 경험치
        * 환생시 획득 (대량 획득)
          * 플레이어 경험치
          * 스킬 경험치
          * 펫 경험치
    * 플레이어 능력치 데이터
      * HP / MP
      * 크리티컬 확률
      * 크리터컬 데미지
      * 공격속도
      * 캐스팅속도
      * 이동속도
    * 스킬
      * 통합형 스킬
        * 트리형 스킬 구조도에서 스킬
        * 스킬 레벨에 따라 획득 가능
    * 재화
      * 단위 : "석"
        * 몬스터 처치시 획득
        * 장비 판매시 획득

* **몬스터**

  * 일반 몬스터
    * 움직임
      * 좌우 방향
      * 상하는 움직이지 않음
      * 플랫폼 가장자리에서 동작방향 변경
    * 속성
      * HP
      * 물리/마법 데미지
      * 물리/마법 방어력
    * 공격 동작
      * 없음
      * 플레이어와 닿을 시 데미지를 입히는 방식
    * 아이템 드랍
      * 몬스터 사망 시
  * 강화 몬스터
    * 움직임
      * 일반 몬스터와 동일
    * 속성
      * 일반 몬스터와 동일
    * 공격 동작
      * 플레이어가 일정 범위안에 들어올 경우 공격 모션 발동
        * 근거리 공격
        * 범위 공격
      * 플레이어와 닿을 시 데미지를 입힘
    * 아이템 드랍
      * 몬스터 사망 시
  * 보스 몬스터
    * 움직임
      * 강화 몬스터와 동일
    * 속성
      * 강화 몬스터와 동일
    * 공격 동작
      * 플레이어가 일정 범위안에 들어올 경우 공격 모션 발동
        * 근거리 공격
        * 범위 공격
        * 원거리 공격
      * 플레이어와 닿을 시 데미지를 입힘
    * 아이템 드랍
      * 피격 시 일정확률로 드랍
      * 몬스터 사망 시 드랍

  

  

  ### 

### 코드 설계

* **상속 구조 활용**

  * 코드 재사용성을 높이기 위해 사용

* 최적화 기법

  * 오브젝트 풀링
    * Active 상태로 확인
    * 풀링 대상
      * 몬스터
      * 플레이어 스킬
      * 버프

* Scene에 따른 처리

  * undestroy
    * 메인 카메라 매니저
    * 오브젝트 풀링 매니저
    * 플레이어 매니저
    * 사운드 매니저
  * active flag
    * 몬스터
    * 플레이어 스킬
    * 버프
  * destroy
    * 매우 간간히 발생할 수 있는 데이터

* 공유용 스크립트

  * HP/MP Bar 업데이트 클래스

  * Buff 업데이트 스크립트

  * 전체 스킬 매니저

  * 오브젝트 풀링 클래스

  * 화면 이동 스크립트

    * 동일한 Scene에서 화면 이동 시
    * 다른 Scene으로 변경 및 이동 시

  * 아이템 매니저

    * 전체 아이템 구성

  * 인벤토리 매니저

    



```C++
This is an H1
=============
```
